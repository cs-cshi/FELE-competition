## 赛题
  比赛所用的数据为不同类型的DDoS攻击流量数据所提取出的特征，数据采样于 CICDDoS2019。训练数据集包含多个文件，每一个文件代表一个节点（数据孤岛）的数据。参赛选手需要设计模型来训练各个节点的数据，然后通过参数服务器进行模型的聚合，从而得到一个全局模型。

## 初赛
- 训练过程
  - 模拟了标准的Federated Learning的训练过程。网络结构为单Server，多Worker的结构。
  - 训练过程为同步训练，即每一轮各个Worker需要与服务器同步模型数据，而后再进行下一轮的训练。
  - 训练步骤
    1. Worker 在本地训练，得到模型的梯度更新
    2. Worker 将改更新传递给参数服务器
    3. 一轮训练完毕，参数服务器将一轮内所搜集到的所有Worker的梯度更新进行聚合，并且将聚合后的梯度更新到上一轮得到的最新模型之上。参数服务器会返回最新模型的路径供Worker下一轮训练使用
    4. Worker根据参数服务器返回的最新模型的路径，将模型下载到本地（模拟运行直接打开即可），进行新一轮的训练
    5. 重复上述过程直至训练结束

- 代码结构
  - **aggregator.py**: 用于实现将一轮内所得到的梯度进行聚合
  - **context.py**: 定义了一些Federated Learning的一些适配的类
  - **learning_model.py**: 用于定义机器学习模型，参赛选手需要在此定义其设计的模型结构
  - **model.py**: 训练的入口文件，里面定义了参数服务器类以及测试类，参赛选手可以在此调整一些超参数
  - **preprocess.py**: 预处理文件，里面定义了加载训练数据和测试数据的方法，其中
  - **extract_features**: 用于从原始数据中提取特征，参赛选手可以自行修改
  - **UserRoundData**: 用于生成每一轮Worker用于训练的数据
  - **train.py**：定义了user_round_train函数用于每一轮的训练

- 数据集
  - 如果用户使用云平台进行训练，那么训练数据默认会存储在代码同一目录的 train目录下，从 preprocess.py可以看到 TRAINDATA_DIR 的值，默认的测试文件为 test 目录下的 testing-X.pkl 。  testing-X.pkl 文件中包含待预测数据，参赛选手最终需要输出该数据集中包含的数据的预测结果到一个文件中，最终平台将使用该输出文件评价参赛选手的得分
  - 训练数据目录下每一个文件代表一个Worker的数据
  - 用户可以将模版文件和数据集下载到本地进行调试运行 （python model.py）
  - 用户在本地调试完后可以将代码修改同步到云端的竞赛任务中，进行测试，得到最终得分
  - 关于测试集有79列数据，训练集85列数据的问题，测试集中删掉的几列不让使用，可以参考示例代码中所给的方式将训练集中多余的列去掉。

- NOTES
  - 用户可以修改给定的代码模版中的所有文件
  - 各个Worker间不允许进行任何数据的直接交互
  - Worker应该遵循联邦学习的原则，不可将训练数据发送给参数服务器
  - 请勿修改 preprocessing.py 文件中 ATTACK_TYPES 字典中各个攻击类型对应的数值类型，否则 输出结果无效
  - 用户更新任务信息时，请勿修改任务的一些其它配置信息，比如：是否使用GPU，这样可能导致任务不被平台计算服务器接收
  - 由于初赛环境限制，协作环境为模拟执行环境，非直接的分布式环境。Worker之间的任何数据交互均需要通过Parameter Server，Worker与PS之间不可进行原始数据或者提取而来的容易被逆向得到原始数据的数据传输。请不要直接在训练数据与测试数据的特征提取间直接共享任何数据；用于测试数据的特征提取的一切额外数据必须由参数服务器提供，不可直接使用变量传递共享。

## 复赛
- 数据集
为了更贴近现实中网络数据的特点，复赛训练数据有以下几个特点：
  1. worker 数目增多至66个，每个worker 最多只有两类数据
  2. 数据特征存在部分缺失
  3. 数据标签存在部分噪声
测试数据包含除“webddos”外的其他十三类数据，且数据量比初赛有所增加

- 代码
为了更贴近协作学习中分布式的实际场景，复赛代码模板进行了更新，主要有以下变化：
  1. 新增 worker.py 和 server.py，分别模拟实际场景中 worker 节点和参数服务器PS的功能， model.py 只包含 FedAveragingGrads 用来控制 worker 和PS完成协作学习。
  2. 不再存在验证集。初赛代码中的验证集实际是将多个 worker 的数据进行了结合，这违反了数据隐私性的标准，在实际协作学习场景中是不允许的。参赛选手可以自行设计算法达到类似验证集的效果，但注意不要违反数据隐私性。
  

- 同时在代码书写时需注意以下事项：
  1. preprocess.py 中已经仅包含数据读入功能，训练数据的预处理请在 worker.py 完成，测试数据的预处理请在 server.py 完成。 preprocess.py 不允许参赛选手更改。
  2. 实际场景中在 worker 节点上完成的功能请在 worker.py 中定义，实际场景中在参数服务器上完成的功能请在 server.py 中定义（预测测试集标签功能默认在服务器上）。 model.py 只控制 worker 和 PS完成协作学习，不允许定义功能类函数。
  3. 每个worker只能读取自己的数据。worker和server进行数据特征传输请通过各自类中 receive_xx_info() 函数进行，例如模板代码中 worker 将每轮训练的准确率传输到server上，并在 server 里完成了处理；同时server 也将平均的训练准确率回传到了各个worker。
